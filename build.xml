<?xml version='1.0'?>
<project name="PdfMerger" default="dist">
	<description>
		Merges Pdfs and outlines
	</description>

	<!-- set global properties for this bin -->
	<property name='src'   location='src'/>
	<property name='lib'	 location='lib'/>
	<property name='bin' location='bin'/>
	<property name='dist'	 location='dist'/>
	<property name='classpath' location='${lib}/pdfbox.jar'/>
	<property name='javadoc' location='javadoc'/>
	<property name='distfile' value='${dist}/pdfmerger.jar'/>

	<property name='source-version' value='1.7'/>

	<!-- making directories -->
	<target name='mkdir'
	  description='Prepare directories for server'>
		<echo message='Creating needed directories...'/>
		<mkdir dir='${lib}'/>
		<mkdir dir='${bin}'/>
		<mkdir dir='${dist}'/>
		<mkdir dir='${javadoc}'/>
	</target>

	<target name='env' depends='mkdir'>
	</target>

	<target name='compile' depends='generate'
  	  description='Compile'>
		<!-- compiling the source -->
  		<echo message='Compiling the source...'/>
		<javac srcdir='${src}' destdir='${bin}' debug='on' nowarn='false' source='${source-version}' target='${source-version}' includeantruntime='false' classpath='${classpath}'>
			<include name='**/*.java'/>
		</javac>
	</target>

	<target name='generate' depends='mkdir'
		description='Generate all the autogenerated code'>
		<!-- Create the time stamp -->
		<tstamp/>

  		<!-- generate the Java content classes from the schema -->
	</target>

	<target name='dist' depends='compile,unit'
	  description='Generate the distribution' >
		
		<jar jarfile='${distfile}' basedir='${bin}' includes='lib/*.jar **/*.class'>
			<zipgroupfileset dir="lib" includes="*.jar" />
			<!-- <zipgroupfileset dir="/usr/share/java" includes="pdfbox.jar" /> -->
			<manifest>
				<attribute name='Main-Class' value='PdfMerger'/>
				<attribute name='Built-By' value='${user.name}'/>
				<attribute name='Class-Path' value=' ' />
			</manifest>
		</jar>
		
	</target>

	<target name='run' description='Run the distribution' >
		<echo>Executing the program</echo>
		<java jar='${distfile}' fork='true' />
	</target>
	
	<target name='run-all' depends='dist'
	  description='Run the distribution' >
		<echo>Executing the program</echo>
		<java jar='${distfile}' fork='true' />
	</target>

	<!-- ================================================== -->
	<target name='clean'
	   description='Delete class files and docs dir.'>
  		<echo message='Removing old bin and distribution...'/>
		<delete dir='${bin}'/>
		<delete dir='${dist}'/>

	</target>

	<target name='unit-bin' depends='compile,env' if='junit.present'
	  description='bin the JUnit files'>
		<echo message='bining the JUnit tests'/>
	</target>

	<target name='unit' depends='unit-bin,env' if='junit.present'
	  description='Run the JUnit tests'>
		<echo message='Running JUnit test'/>
	</target>

	<target name='javadoc' depends='mkdir'>
		<javadoc sourcepath='${src}' destdir='${javadoc}'>
			<fileset dir='${src}' includes='**/*.java' />
		</javadoc>
	</target>
</project>

